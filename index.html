function createCar(color, isPlayer) {
    const group = new THREE.Group();
    
    if (cachedModel) {
        const model = cachedModel.clone();
        
        // Ajuste de altura que definimos antes
        model.position.y = 0.5; 

        model.traverse(child => {
            if (child.isMesh) {
                // Clonamos o material para que a cor de uma equipe não pinte todas as outras
                child.material = child.material.clone();

                // Aplicamos a cor apenas nas partes que contém "body" ou "chassis" no nome
                // Se o seu modelo não tiver esses nomes, ele manterá a textura original
                if (child.name.toLowerCase().includes("body") || child.name.toLowerCase().includes("paint")) {
                    child.material.color.set(color);
                }
            }
        });
        group.add(model);
    } else {
        // Fallback caso o modelo suma
        const box = new THREE.Mesh(new THREE.BoxGeometry(1.5, 0.6, 4), new THREE.MeshLambertMaterial({color}));
        box.position.y = 0.3;
        group.add(box);
    }

    return group;
}
